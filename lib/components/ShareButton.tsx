const ShareButton = ({ title, content, newsLink }: { title: string; content: string, newsLink: string }) => {
    const handleShareOnWhatsApp = () => {
        // Encoding the title, content, and newsLink
        const encodedTitle = encodeURIComponent(`*${title}*`); // Wrap title in asterisks for bold
        const encodedContent = encodeURIComponent(content);
        const encodedLink = encodeURIComponent(newsLink);

        // Creating the message with bold and italic "איגוד האינטרנט הישראלי מזהיר" and title, using %0A for line breaks
        const message = `*_איגוד האינטרנט הישראלי מזהיר:_*%0A${encodedTitle}%0A${encodedContent}%0Aלעוד עדכונים: ${encodedLink}`;
        
        // Constructing the WhatsApp URL
        const whatsappUrl = `whatsapp://send?text=${message}`;
  
        // Try to open the WhatsApp app
        const opened = window.open(whatsappUrl, "_blank");
      
        // If it fails to open (on desktop), fall back to WhatsApp Web
        if (!opened || opened.closed || typeof opened.closed === 'undefined') {
          const whatsappWebUrl = `https://api.whatsapp.com/send?text=${message}`;
          window.open(whatsappWebUrl, "_blank");
        }
      };

    return (
        <button className="shareButton" onClick={handleShareOnWhatsApp}>
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.7284 4.20713e-07C14.5297 0.000246528 14.3356 0.059733 14.1708 0.170861C14.0061 0.281989 13.8782 0.439712 13.8035 0.623884C13.7288 0.808056 13.7107 1.01031 13.7516 1.20482C13.7924 1.39933 13.8902 1.57725 14.0326 1.71587L14.5791 2.26244C8.73184 2.34883 3.99705 7.13425 3.99705 13.0027C3.99517 13.1352 4.01964 13.2666 4.06902 13.3895C4.11839 13.5124 4.1917 13.6243 4.28467 13.7186C4.37765 13.8129 4.48844 13.8878 4.61061 13.939C4.73278 13.9901 4.86388 14.0164 4.99631 14.0164C5.12874 14.0164 5.25984 13.9901 5.38201 13.939C5.50418 13.8878 5.61497 13.8129 5.70794 13.7186C5.80092 13.6243 5.87423 13.5124 5.9236 13.3895C5.97298 13.2666 5.99744 13.1352 5.99557 13.0027C5.99557 8.21908 9.80647 4.35876 14.5664 4.26624L14.0326 4.80013C13.9367 4.89223 13.8601 5.00253 13.8074 5.1246C13.7546 5.24666 13.7268 5.37802 13.7254 5.51099C13.7241 5.64396 13.7493 5.77586 13.7995 5.89897C13.8498 6.02209 13.9241 6.13393 14.0181 6.22796C14.1121 6.32199 14.2239 6.39631 14.347 6.44657C14.4701 6.49683 14.602 6.52202 14.7349 6.52067C14.8678 6.51932 14.9992 6.49144 15.1212 6.43869C15.2433 6.38593 15.3535 6.30935 15.4456 6.21343L17.6052 4.05346C17.7282 3.95998 17.8279 3.83922 17.8964 3.70069C17.9649 3.56216 18.0004 3.40963 18 3.25507C17.9996 3.10052 17.9634 2.94817 17.8942 2.80997C17.825 2.67178 17.7248 2.55151 17.6013 2.45863L15.4456 0.302571C15.3524 0.20671 15.2409 0.130538 15.1177 0.0785661C14.9945 0.0265937 14.8621 -0.000122276 14.7284 4.20713e-07ZM3.2476 0.00976075C1.46584 0.00976075 0 1.47589 0 3.258V14.7518C0 16.5339 1.46584 18 3.2476 18H14.7391C16.5209 18 17.9867 16.5339 17.9867 14.7518V11.0038C17.9886 10.8714 17.9641 10.7399 17.9147 10.617C17.8654 10.4941 17.7921 10.3822 17.6991 10.2879C17.6061 10.1936 17.4953 10.1187 17.3732 10.0675C17.251 10.0164 17.1199 9.9901 16.9875 9.9901C16.855 9.9901 16.7239 10.0164 16.6017 10.0675C16.4796 10.1187 16.3688 10.1936 16.2758 10.2879C16.1828 10.3822 16.1095 10.4941 16.0602 10.617C16.0108 10.7399 15.9863 10.8714 15.9882 11.0038V14.7518C15.9882 15.4533 15.4405 16.0011 14.7391 16.0011H3.2476C2.5462 16.0011 1.99852 15.4533 1.99852 14.7518V3.258C1.99852 2.55646 2.5462 2.00868 3.2476 2.00868H6.99483C7.12725 2.01055 7.25871 1.98608 7.38159 1.93669C7.50447 1.88731 7.61631 1.81399 7.71061 1.72099C7.80491 1.628 7.87979 1.51719 7.9309 1.395C7.98201 1.2728 8.00833 1.14167 8.00833 1.00922C8.00833 0.876765 7.98201 0.745633 7.9309 0.623442C7.87979 0.501251 7.80491 0.390439 7.71061 0.297445C7.61631 0.204451 7.50447 0.13113 7.38159 0.0817427C7.25871 0.0323557 7.12725 0.00788772 6.99483 0.00976075H3.2476Z" fill="#7B61FF"/>
            </svg> 
        </button>
    );
};

export default ShareButton;